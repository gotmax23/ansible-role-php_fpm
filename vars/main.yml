---
# vars file for php_fpm
_php_version_debian:
  - default: 7.3
  - Debian-10: 7.3
  - Debian-testing: 7.4
  - Debian-unstable: 7.4
  - Ubuntu-17: 7.1
  - Ubuntu-18: 7.2
  - Ubuntu-19: 7.3
  - Ubuntu-20: 7.4

_php_fpm_packages:
  default:
    - php-fpm
  Debian:
    - php{php_version_debian}-fpm
  Alpine:
    - php{php_version_alpine}-fpm
  Suse:
    - php{php_version_suse}-fpm

php_fpm_packages: "{{ _php_fpm_packages[ansible_os_family] | default(_php_fpm_packages['default']) }}"

_php_fpm_directory:
  default: /etc
  Alpine: "/etc/php{{ php_version_alpine }}"
  Debian: "/etc/php/{{ php_version_debian }}/fpm"
  Fedora: /etc
  openSUSE Leap: "/etc/php{{ php_version_suse }}/fpm"

php_fpm_directory: "{{ _php_fpm_directory[ansible_distribution] | default(_php_fpm_directory[ansible_os_family] | default(_php_fpm_directory['default'])) }}"

_php_fpm_pid_directory:
  default: /run/php-fpm
  Alpine: "/run/php-fpm{{ php_version_alpine }}"
  Debian: /run/php
  RedHat: /run/php-fpm
  Suse: /var/run

php_fpm_pid_directory: "{{ _php_fpm_pid_directory[ansible_os_family] | default(_php_fpm_pid_directory['default']) }}"

_php_fpm_user:
  default: nobody
  Debian: daemon
  Suse: wwwrun

php_fpm_user: "{{ _php_fpm_user[ansible_os_family] | default(_php_fpm_user['default']) }}"

_php_fpm_include_directory:
  default: "{{ php_fpm_directory }}/php-fpm.d"
  Debian: "{{ php_fpm_directory }}/conf.d"

php_fpm_include_directory: "{{ _php_fpm_include_directory[ansible_os_family] | default(_php_fpm_include_directory['default']) }}"

_php_fpm_service:
  default: php-fpm
  Alpine: "php-fpm{{ php_version_alpine }}"
  Debian: "php{{ php_version_debian }}-fpm.service"
  openSUSE Leap: php-fpm

php_fpm_service: "{{ _php_fpm_service[ansible_distribution] | default(_php_fpm_service[ansible_os_family] | default(_php_fpm_service['default'])) }}"

_php_fpm_owner:
  httpd:
    default: apache
    Debian: www-data
    Suse: wwwrun
  nginx:
    default: nginx
    Debian: www-data

php_fpm_owner: "{{ _php_fpm_owner[php_webserver][ansible_os_family] | default(_php_fpm_owner[php_webserver]['default']) }}"

_php_fpm_group:
  httpd:
    default: apache
    Debian: www-data
    Suse: www
  nginx:
    default: nginx
    Debian: www-data

php_fpm_group: "{{ _php_fpm_group[php_webserver][ansible_os_family] | default(_php_fpm_group[php_webserver]['default']) }}"
